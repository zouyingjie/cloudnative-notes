<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <meta name="generator" content="VuePress 2.0.0-rc.0">
    <style>
      :root {
        --c-bg: #fff;
      }
      html.dark {
        --c-bg: #22272e;
      }
      html, body {
        background-color: var(--c-bg);
      }
    </style>
    <script>
      const userMode = localStorage.getItem('vuepress-color-scheme');
			const systemDarkMode = window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches;
			if (userMode === 'dark' || (userMode !== 'light' && systemDarkMode)) {
				document.documentElement.classList.toggle('dark', true);
			}
    </script>
    <title>服务通信的演进 | 云原生架构笔记</title><meta name="description" content="构建大规模高可用的分布式系统">
    <link rel="preload" href="/cloudnativenotes/assets/style-C8UjLoOj.css" as="style"><link rel="stylesheet" href="/cloudnativenotes/assets/style-C8UjLoOj.css">
    <link rel="modulepreload" href="/cloudnativenotes/assets/app-C-eiXR-Q.js"><link rel="modulepreload" href="/cloudnativenotes/assets/communication.html-AUvi7IaZ.js"><link rel="modulepreload" href="/cloudnativenotes/assets/communication.html-BXw213ih.js">
    <link rel="prefetch" href="/cloudnativenotes/assets/index.html-CaDEAGlr.js" as="script"><link rel="prefetch" href="/cloudnativenotes/assets/summary.html-5z9O3CRM.js" as="script"><link rel="prefetch" href="/cloudnativenotes/assets/cron.html-BJpwXMoc.js" as="script"><link rel="prefetch" href="/cloudnativenotes/assets/distributed-cache.html-BKPXsc_g.js" as="script"><link rel="prefetch" href="/cloudnativenotes/assets/distributed-lock.html-Bkc2bnt8.js" as="script"><link rel="prefetch" href="/cloudnativenotes/assets/session.html-DcEZyuC3.js" as="script"><link rel="prefetch" href="/cloudnativenotes/assets/tracing.html-yfpjvzw7.js" as="script"><link rel="prefetch" href="/cloudnativenotes/assets/uniqueid.html-DUYGPfKT.js" as="script"><link rel="prefetch" href="/cloudnativenotes/assets/cap.html-B_eIltcI.js" as="script"><link rel="prefetch" href="/cloudnativenotes/assets/clock.html-KdfBpAtx.js" as="script"><link rel="prefetch" href="/cloudnativenotes/assets/consistency-and-consensus.html-B_fCTLL3.js" as="script"><link rel="prefetch" href="/cloudnativenotes/assets/overview.html-Bgzt7s1r.js" as="script"><link rel="prefetch" href="/cloudnativenotes/assets/sharding-and-replication.html-DUvyRyQl.js" as="script"><link rel="prefetch" href="/cloudnativenotes/assets/transaction.html-CtA4W0xM.js" as="script"><link rel="prefetch" href="/cloudnativenotes/assets/about.html-Bj3jP03N.js" as="script"><link rel="prefetch" href="/cloudnativenotes/assets/dots.html-BFeEvQ5S.js" as="script"><link rel="prefetch" href="/cloudnativenotes/assets/learn.html-CcJfDuaJ.js" as="script"><link rel="prefetch" href="/cloudnativenotes/assets/perspective.html-Cm4yK9nC.js" as="script"><link rel="prefetch" href="/cloudnativenotes/assets/responsibility.html-Dim4SFw7.js" as="script"><link rel="prefetch" href="/cloudnativenotes/assets/toc.html-DvyeioSm.js" as="script"><link rel="prefetch" href="/cloudnativenotes/assets/01.service-discovery.html-DCArp20B.js" as="script"><link rel="prefetch" href="/cloudnativenotes/assets/02.service-config.html-wuC-D5mv.js" as="script"><link rel="prefetch" href="/cloudnativenotes/assets/06.service-health.html-BYhliNkX.js" as="script"><link rel="prefetch" href="/cloudnativenotes/assets/07.service-resilience-01.html-Dj-QSlZB.js" as="script"><link rel="prefetch" href="/cloudnativenotes/assets/07.service-resilience-02.html-DUX16yyQ.js" as="script"><link rel="prefetch" href="/cloudnativenotes/assets/08.traffic-schedule.html-Dxbe7Y59.js" as="script"><link rel="prefetch" href="/cloudnativenotes/assets/index.html-Bb_GtxkL.js" as="script"><link rel="prefetch" href="/cloudnativenotes/assets/index.html-fbfqkZuh.js" as="script"><link rel="prefetch" href="/cloudnativenotes/assets/architecture.html-DJlJ8uIA.js" as="script"><link rel="prefetch" href="/cloudnativenotes/assets/computing.html-Dcz7xqt8.js" as="script"><link rel="prefetch" href="/cloudnativenotes/assets/definition.html-DcY1Fd2x.js" as="script"><link rel="prefetch" href="/cloudnativenotes/assets/pass.html-CpqYH6Ci.js" as="script"><link rel="prefetch" href="/cloudnativenotes/assets/index.html-ahw7-hdr.js" as="script"><link rel="prefetch" href="/cloudnativenotes/assets/docker-arch.html-BgXIXtLU.js" as="script"><link rel="prefetch" href="/cloudnativenotes/assets/docker-cgroups.html-oZZix2EO.js" as="script"><link rel="prefetch" href="/cloudnativenotes/assets/docker-devicemapper.html-CeexLsdc.js" as="script"><link rel="prefetch" href="/cloudnativenotes/assets/docker-filesystem.html-CqqKrl0p.js" as="script"><link rel="prefetch" href="/cloudnativenotes/assets/docker-namespace.html-DkDkZSP1.js" as="script"><link rel="prefetch" href="/cloudnativenotes/assets/docker.html-BYi6I0z-.js" as="script"><link rel="prefetch" href="/cloudnativenotes/assets/index.html-DZ8leFL_.js" as="script"><link rel="prefetch" href="/cloudnativenotes/assets/cicd.html-BQwJRK1k.js" as="script"><link rel="prefetch" href="/cloudnativenotes/assets/devops.html-Bkik9OU5.js" as="script"><link rel="prefetch" href="/cloudnativenotes/assets/gitflow.html-BGbxGwE2.js" as="script"><link rel="prefetch" href="/cloudnativenotes/assets/index.html-D-_Pw43X.js" as="script"><link rel="prefetch" href="/cloudnativenotes/assets/application.html-DxKvtGl3.js" as="script"><link rel="prefetch" href="/cloudnativenotes/assets/architecture.html-CgZOV9r7.js" as="script"><link rel="prefetch" href="/cloudnativenotes/assets/cka.html-CPTlxrnN.js" as="script"><link rel="prefetch" href="/cloudnativenotes/assets/config.html-velI3VEj.js" as="script"><link rel="prefetch" href="/cloudnativenotes/assets/controller.html-k2T6cqne.js" as="script"><link rel="prefetch" href="/cloudnativenotes/assets/future.html-BsLZsvYN.js" as="script"><link rel="prefetch" href="/cloudnativenotes/assets/monitoring.html-DTZQN_t0.js" as="script"><link rel="prefetch" href="/cloudnativenotes/assets/network.html-DBksTdnb.js" as="script"><link rel="prefetch" href="/cloudnativenotes/assets/pod.html-DvVxe9V4.js" as="script"><link rel="prefetch" href="/cloudnativenotes/assets/scheduler.html-CAcDBcea.js" as="script"><link rel="prefetch" href="/cloudnativenotes/assets/security.html-DWM-cXsC.js" as="script"><link rel="prefetch" href="/cloudnativenotes/assets/storage.html-DOJKqM46.js" as="script"><link rel="prefetch" href="/cloudnativenotes/assets/index.html-WEBBo--q.js" as="script"><link rel="prefetch" href="/cloudnativenotes/assets/definition.html-DC1x1JT3.js" as="script"><link rel="prefetch" href="/cloudnativenotes/assets/logging.html-BmDmiZXu.js" as="script"><link rel="prefetch" href="/cloudnativenotes/assets/metrics.html-BIerCiie.js" as="script"><link rel="prefetch" href="/cloudnativenotes/assets/monitoring.html-Dyz9s1ab.js" as="script"><link rel="prefetch" href="/cloudnativenotes/assets/trace.html-CVfGSZ9N.js" as="script"><link rel="prefetch" href="/cloudnativenotes/assets/dependency.html-BKhmP467.js" as="script"><link rel="prefetch" href="/cloudnativenotes/assets/discovery.html-BV343_90.js" as="script"><link rel="prefetch" href="/cloudnativenotes/assets/lifecycle.html-CDWsGv0r.js" as="script"><link rel="prefetch" href="/cloudnativenotes/assets/scale.html-H75RsCaz.js" as="script"><link rel="prefetch" href="/cloudnativenotes/assets/stack.html-r7RjtVmp.js" as="script"><link rel="prefetch" href="/cloudnativenotes/assets/design.html-CTn3BIoS.js" as="script"><link rel="prefetch" href="/cloudnativenotes/assets/servicemesh.html-DtdX3YpQ.js" as="script"><link rel="prefetch" href="/cloudnativenotes/assets/rest.html-C1iE-8Cc.js" as="script"><link rel="prefetch" href="/cloudnativenotes/assets/webapi.html-CHk3nZs5.js" as="script"><link rel="prefetch" href="/cloudnativenotes/assets/index.html-9l9raxog.js" as="script"><link rel="prefetch" href="/cloudnativenotes/assets/history.html-CVrvIJBh.js" as="script"><link rel="prefetch" href="/cloudnativenotes/assets/index.html-9l9raxog.js" as="script"><link rel="prefetch" href="/cloudnativenotes/assets/mysql.html-C7Za4xWb.js" as="script"><link rel="prefetch" href="/cloudnativenotes/assets/nosql.html-CZOZOwW8.js" as="script"><link rel="prefetch" href="/cloudnativenotes/assets/REAEMD.html-CkzaJNpe.js" as="script"><link rel="prefetch" href="/cloudnativenotes/assets/auth.html-DEvRT4s_.js" as="script"><link rel="prefetch" href="/cloudnativenotes/assets/permission.html-DxiAcbsM.js" as="script"><link rel="prefetch" href="/cloudnativenotes/assets/roadmap.html-CSbh4B2o.js" as="script"><link rel="prefetch" href="/cloudnativenotes/assets/tls-cert.html-lCTnlmUr.js" as="script"><link rel="prefetch" href="/cloudnativenotes/assets/contract.html-f9rU0CZJ.js" as="script"><link rel="prefetch" href="/cloudnativenotes/assets/function.html-COBB1Ko5.js" as="script"><link rel="prefetch" href="/cloudnativenotes/assets/load.html-DuAW42s-.js" as="script"><link rel="prefetch" href="/cloudnativenotes/assets/spring-boot-unit-testing.html-CSz971jG.js" as="script"><link rel="prefetch" href="/cloudnativenotes/assets/testcontainer.html-DJN5emyo.js" as="script"><link rel="prefetch" href="/cloudnativenotes/assets/unit-test.html-BuuSHng_.js" as="script"><link rel="prefetch" href="/cloudnativenotes/assets/availability.html-eZd_Y02n.js" as="script"><link rel="prefetch" href="/cloudnativenotes/assets/decoupling.html-BoiDHrhp.js" as="script"><link rel="prefetch" href="/cloudnativenotes/assets/fault-tolerance.html-BN40USBU.js" as="script"><link rel="prefetch" href="/cloudnativenotes/assets/patterns.html-n88CnXZx.js" as="script"><link rel="prefetch" href="/cloudnativenotes/assets/redundancy.html-CjCijiXC.js" as="script"><link rel="prefetch" href="/cloudnativenotes/assets/loadbalancing.html-CWkvv6J6.js" as="script"><link rel="prefetch" href="/cloudnativenotes/assets/mirroring.html-CpQrip5y.js" as="script"><link rel="prefetch" href="/cloudnativenotes/assets/rate-limiting.html-4-4WIe2F.js" as="script"><link rel="prefetch" href="/cloudnativenotes/assets/routing.html-D5F4XlL8.js" as="script"><link rel="prefetch" href="/cloudnativenotes/assets/404.html-DqZtwkbf.js" as="script"><link rel="prefetch" href="/cloudnativenotes/assets/index.html-DsMxHoe1.js" as="script"><link rel="prefetch" href="/cloudnativenotes/assets/summary.html-Q6t1kFgr.js" as="script"><link rel="prefetch" href="/cloudnativenotes/assets/cron.html-Dra8Tne5.js" as="script"><link rel="prefetch" href="/cloudnativenotes/assets/distributed-cache.html-ty6fkx7S.js" as="script"><link rel="prefetch" href="/cloudnativenotes/assets/distributed-lock.html-IGRU4884.js" as="script"><link rel="prefetch" href="/cloudnativenotes/assets/session.html-B9otZ8y_.js" as="script"><link rel="prefetch" href="/cloudnativenotes/assets/tracing.html-DqqQpAG7.js" as="script"><link rel="prefetch" href="/cloudnativenotes/assets/uniqueid.html-BJ4CDN8L.js" as="script"><link rel="prefetch" href="/cloudnativenotes/assets/cap.html-hpEFshBw.js" as="script"><link rel="prefetch" href="/cloudnativenotes/assets/clock.html-Bw-k7agB.js" as="script"><link rel="prefetch" href="/cloudnativenotes/assets/consistency-and-consensus.html-CMgxqBLl.js" as="script"><link rel="prefetch" href="/cloudnativenotes/assets/overview.html-BDQ2tztl.js" as="script"><link rel="prefetch" href="/cloudnativenotes/assets/sharding-and-replication.html-BPvJZka6.js" as="script"><link rel="prefetch" href="/cloudnativenotes/assets/transaction.html-BRXvto4R.js" as="script"><link rel="prefetch" href="/cloudnativenotes/assets/about.html-bDLcxvSU.js" as="script"><link rel="prefetch" href="/cloudnativenotes/assets/dots.html-2bB6Ku5l.js" as="script"><link rel="prefetch" href="/cloudnativenotes/assets/learn.html-D5_C_y2e.js" as="script"><link rel="prefetch" href="/cloudnativenotes/assets/perspective.html-CuEkVcup.js" as="script"><link rel="prefetch" href="/cloudnativenotes/assets/responsibility.html-D2uQ6HKY.js" as="script"><link rel="prefetch" href="/cloudnativenotes/assets/toc.html-CCU8umSy.js" as="script"><link rel="prefetch" href="/cloudnativenotes/assets/01.service-discovery.html-CJAFPF0c.js" as="script"><link rel="prefetch" href="/cloudnativenotes/assets/02.service-config.html-C0dT9MoJ.js" as="script"><link rel="prefetch" href="/cloudnativenotes/assets/06.service-health.html-x4gh2uOy.js" as="script"><link rel="prefetch" href="/cloudnativenotes/assets/07.service-resilience-01.html-C6878baV.js" as="script"><link rel="prefetch" href="/cloudnativenotes/assets/07.service-resilience-02.html-DC3AQT_a.js" as="script"><link rel="prefetch" href="/cloudnativenotes/assets/08.traffic-schedule.html-DgSx9VI2.js" as="script"><link rel="prefetch" href="/cloudnativenotes/assets/index.html-Br69DyaM.js" as="script"><link rel="prefetch" href="/cloudnativenotes/assets/index.html-CRtCP2eX.js" as="script"><link rel="prefetch" href="/cloudnativenotes/assets/architecture.html-ndQf8NmT.js" as="script"><link rel="prefetch" href="/cloudnativenotes/assets/computing.html-DAdfg3A6.js" as="script"><link rel="prefetch" href="/cloudnativenotes/assets/definition.html-1slUJu0S.js" as="script"><link rel="prefetch" href="/cloudnativenotes/assets/pass.html-BI14EvKo.js" as="script"><link rel="prefetch" href="/cloudnativenotes/assets/index.html-ocX59_KX.js" as="script"><link rel="prefetch" href="/cloudnativenotes/assets/docker-arch.html-sAcu90h4.js" as="script"><link rel="prefetch" href="/cloudnativenotes/assets/docker-cgroups.html-yRJlFdgp.js" as="script"><link rel="prefetch" href="/cloudnativenotes/assets/docker-devicemapper.html-DyyGUOsZ.js" as="script"><link rel="prefetch" href="/cloudnativenotes/assets/docker-filesystem.html-B-AjM8BT.js" as="script"><link rel="prefetch" href="/cloudnativenotes/assets/docker-namespace.html-CkkVUzCp.js" as="script"><link rel="prefetch" href="/cloudnativenotes/assets/docker.html-BLzfnp1G.js" as="script"><link rel="prefetch" href="/cloudnativenotes/assets/index.html-Bcpe9sBH.js" as="script"><link rel="prefetch" href="/cloudnativenotes/assets/cicd.html-DnIxr7nV.js" as="script"><link rel="prefetch" href="/cloudnativenotes/assets/devops.html-rSNNi7J-.js" as="script"><link rel="prefetch" href="/cloudnativenotes/assets/gitflow.html-CeOrhknP.js" as="script"><link rel="prefetch" href="/cloudnativenotes/assets/index.html-CtiE0YWL.js" as="script"><link rel="prefetch" href="/cloudnativenotes/assets/application.html-BFOT_eF4.js" as="script"><link rel="prefetch" href="/cloudnativenotes/assets/architecture.html-Dc4NXGaN.js" as="script"><link rel="prefetch" href="/cloudnativenotes/assets/cka.html-CgPyOSG3.js" as="script"><link rel="prefetch" href="/cloudnativenotes/assets/config.html-CqHsKfL2.js" as="script"><link rel="prefetch" href="/cloudnativenotes/assets/controller.html-DjkUXQkH.js" as="script"><link rel="prefetch" href="/cloudnativenotes/assets/future.html-D34sD3Y8.js" as="script"><link rel="prefetch" href="/cloudnativenotes/assets/monitoring.html-CToHqHbr.js" as="script"><link rel="prefetch" href="/cloudnativenotes/assets/network.html-BJLLLwuE.js" as="script"><link rel="prefetch" href="/cloudnativenotes/assets/pod.html-wpRnt80g.js" as="script"><link rel="prefetch" href="/cloudnativenotes/assets/scheduler.html-ChB2Dnju.js" as="script"><link rel="prefetch" href="/cloudnativenotes/assets/security.html-B1mAlvG1.js" as="script"><link rel="prefetch" href="/cloudnativenotes/assets/storage.html-DfrhP5dU.js" as="script"><link rel="prefetch" href="/cloudnativenotes/assets/index.html-DuVr14wn.js" as="script"><link rel="prefetch" href="/cloudnativenotes/assets/definition.html-CYhZ0K2_.js" as="script"><link rel="prefetch" href="/cloudnativenotes/assets/logging.html-DZ1T0vlO.js" as="script"><link rel="prefetch" href="/cloudnativenotes/assets/metrics.html-NpQXjRPE.js" as="script"><link rel="prefetch" href="/cloudnativenotes/assets/monitoring.html-BbJFPRdf.js" as="script"><link rel="prefetch" href="/cloudnativenotes/assets/trace.html-B6jHcs82.js" as="script"><link rel="prefetch" href="/cloudnativenotes/assets/dependency.html-CLPqcmBN.js" as="script"><link rel="prefetch" href="/cloudnativenotes/assets/discovery.html-DLnVIG59.js" as="script"><link rel="prefetch" href="/cloudnativenotes/assets/lifecycle.html-DbMEvmWs.js" as="script"><link rel="prefetch" href="/cloudnativenotes/assets/scale.html-CD8rqfDC.js" as="script"><link rel="prefetch" href="/cloudnativenotes/assets/stack.html-y5jQssus.js" as="script"><link rel="prefetch" href="/cloudnativenotes/assets/design.html-CmHJURnv.js" as="script"><link rel="prefetch" href="/cloudnativenotes/assets/servicemesh.html-SLNvveq9.js" as="script"><link rel="prefetch" href="/cloudnativenotes/assets/rest.html-BuuGuwVc.js" as="script"><link rel="prefetch" href="/cloudnativenotes/assets/webapi.html-BFHol3Z1.js" as="script"><link rel="prefetch" href="/cloudnativenotes/assets/index.html-BLuU14Un.js" as="script"><link rel="prefetch" href="/cloudnativenotes/assets/history.html-Bo5Jk6Z9.js" as="script"><link rel="prefetch" href="/cloudnativenotes/assets/index.html-BLuU14Un.js" as="script"><link rel="prefetch" href="/cloudnativenotes/assets/mysql.html-DY6VZY0J.js" as="script"><link rel="prefetch" href="/cloudnativenotes/assets/nosql.html-BnPzgDlf.js" as="script"><link rel="prefetch" href="/cloudnativenotes/assets/REAEMD.html-B9hyN1MS.js" as="script"><link rel="prefetch" href="/cloudnativenotes/assets/auth.html-C1IynFQA.js" as="script"><link rel="prefetch" href="/cloudnativenotes/assets/permission.html-6DRnqYOD.js" as="script"><link rel="prefetch" href="/cloudnativenotes/assets/roadmap.html-Cj29XfbQ.js" as="script"><link rel="prefetch" href="/cloudnativenotes/assets/tls-cert.html-DQRQ2S_V.js" as="script"><link rel="prefetch" href="/cloudnativenotes/assets/contract.html-DLjt-c0Q.js" as="script"><link rel="prefetch" href="/cloudnativenotes/assets/function.html-COQyIpZW.js" as="script"><link rel="prefetch" href="/cloudnativenotes/assets/load.html-4Xd7pdLN.js" as="script"><link rel="prefetch" href="/cloudnativenotes/assets/spring-boot-unit-testing.html-DNhjdjQR.js" as="script"><link rel="prefetch" href="/cloudnativenotes/assets/testcontainer.html-CdxrgXLE.js" as="script"><link rel="prefetch" href="/cloudnativenotes/assets/unit-test.html-BnApfdzU.js" as="script"><link rel="prefetch" href="/cloudnativenotes/assets/availability.html-B6i0aGsC.js" as="script"><link rel="prefetch" href="/cloudnativenotes/assets/decoupling.html-T03ienA-.js" as="script"><link rel="prefetch" href="/cloudnativenotes/assets/fault-tolerance.html-CoDoYsNs.js" as="script"><link rel="prefetch" href="/cloudnativenotes/assets/patterns.html-XA-MeAJP.js" as="script"><link rel="prefetch" href="/cloudnativenotes/assets/redundancy.html-Cw-rGKyJ.js" as="script"><link rel="prefetch" href="/cloudnativenotes/assets/loadbalancing.html-CMPnvy1k.js" as="script"><link rel="prefetch" href="/cloudnativenotes/assets/mirroring.html-B4Yk6fXQ.js" as="script"><link rel="prefetch" href="/cloudnativenotes/assets/rate-limiting.html-XirS-n2q.js" as="script"><link rel="prefetch" href="/cloudnativenotes/assets/routing.html-BqsuJym0.js" as="script"><link rel="prefetch" href="/cloudnativenotes/assets/404.html-BpKyP9F4.js" as="script"><link rel="prefetch" href="/cloudnativenotes/assets/giscus-DrGxERkK.js" as="script"><link rel="prefetch" href="/cloudnativenotes/assets/buttons.esm-DK2fWHEW.js" as="script">
  </head>
  <body>
    <div id="app"><!--[--><div class="theme-container" data-v-efed79f6><!--[--><header class="navbar"><div class="toggle-sidebar-button" title="toggle sidebar" aria-expanded="false" role="button" tabindex="0"><div class="icon" aria-hidden="true"><span></span><span></span><span></span></div></div><span><a href="/cloudnativenotes/" class=""><img class="logo" src="/cloudnativenotes/images/microservices-logo.svg" alt="云原生架构笔记"><span class="site-name can-hide">云原生架构笔记</span></a></span><div class="navbar-items-wrapper" style=""><!--[--><!--]--><nav class="navbar-items can-hide"><!--[--><div class="navbar-item"><a href="/cloudnativenotes/" class="" aria-label="首页"><!--[--><!--]--> 首页 <!--[--><!--]--></a></div><div class="navbar-item"><a class="external-link" href="https://github.com/zouyingjie/cloudnativenotes/discussions" rel="noopener noreferrer" target="_blank" aria-label="讨论"><!--[--><!--]--> 讨论 <span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!--[--><!--]--></a></div><div class="navbar-item"><a class="external-link" href="https://github.com/zouyingjie/cloudnativenotes" rel="noopener noreferrer" target="_blank" aria-label="GitHub"><!--[--><!--]--> GitHub <span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!--[--><!--]--></a></div><!--]--></nav><!--[--><!--]--><button class="toggle-color-mode-button" title="toggle color mode"><svg style="" class="icon" focusable="false" viewBox="0 0 32 32"><path d="M16 12.005a4 4 0 1 1-4 4a4.005 4.005 0 0 1 4-4m0-2a6 6 0 1 0 6 6a6 6 0 0 0-6-6z" fill="currentColor"></path><path d="M5.394 6.813l1.414-1.415l3.506 3.506L8.9 10.318z" fill="currentColor"></path><path d="M2 15.005h5v2H2z" fill="currentColor"></path><path d="M5.394 25.197L8.9 21.691l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 25.005h2v5h-2z" fill="currentColor"></path><path d="M21.687 23.106l1.414-1.415l3.506 3.506l-1.414 1.414z" fill="currentColor"></path><path d="M25 15.005h5v2h-5z" fill="currentColor"></path><path d="M21.687 8.904l3.506-3.506l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 2.005h2v5h-2z" fill="currentColor"></path></svg><svg style="display:none;" class="icon" focusable="false" viewBox="0 0 32 32"><path d="M13.502 5.414a15.075 15.075 0 0 0 11.594 18.194a11.113 11.113 0 0 1-7.975 3.39c-.138 0-.278.005-.418 0a11.094 11.094 0 0 1-3.2-21.584M14.98 3a1.002 1.002 0 0 0-.175.016a13.096 13.096 0 0 0 1.825 25.981c.164.006.328 0 .49 0a13.072 13.072 0 0 0 10.703-5.555a1.01 1.01 0 0 0-.783-1.565A13.08 13.08 0 0 1 15.89 4.38A1.015 1.015 0 0 0 14.98 3z" fill="currentColor"></path></svg></button><!----></div></header><!--]--><div class="sidebar-mask"></div><!--[--><aside class="sidebar"><nav class="navbar-items"><!--[--><div class="navbar-item"><a href="/cloudnativenotes/" class="" aria-label="首页"><!--[--><!--]--> 首页 <!--[--><!--]--></a></div><div class="navbar-item"><a class="external-link" href="https://github.com/zouyingjie/cloudnativenotes/discussions" rel="noopener noreferrer" target="_blank" aria-label="讨论"><!--[--><!--]--> 讨论 <span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!--[--><!--]--></a></div><div class="navbar-item"><a class="external-link" href="https://github.com/zouyingjie/cloudnativenotes" rel="noopener noreferrer" target="_blank" aria-label="GitHub"><!--[--><!--]--> GitHub <span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!--[--><!--]--></a></div><!--]--></nav><!--[--><!--]--><ul class="sidebar-items"><!--[--><li><a href="/cloudnativenotes/end/about.md" class="sidebar-item sidebar-heading" aria-label="前言"><!--[--><!--]--> 前言 <!--[--><!--]--></a><!----></li><li><a href="/cloudnativenotes/end/toc.md" class="sidebar-item sidebar-heading" aria-label="目录"><!--[--><!--]--> 目录 <!--[--><!--]--></a><!----></li><li><p tabindex="0" class="sidebar-item sidebar-heading">通用设计 <!----></p><ul style="" class="sidebar-item-children"><!--[--><li><p tabindex="0" class="sidebar-item">数据建模 <!----></p><ul style="" class="sidebar-item-children"><!--[--><li><a href="/cloudnativenotes/common-design/modeling/history.html" class="sidebar-item" aria-label="DBMS的演进"><!--[--><!--]--> DBMS的演进 <!--[--><!--]--></a><!----></li><li><a href="/cloudnativenotes/common-design/modeling/" class="sidebar-item" aria-label="数据库索引设计与优化"><!--[--><!--]--> 数据库索引设计与优化 <!--[--><!--]--></a><!----></li><li><a href="/cloudnativenotes/common-design/modeling/mysql.html" class="sidebar-item" aria-label="MySQL 开发规范"><!--[--><!--]--> MySQL 开发规范 <!--[--><!--]--></a><!----></li><li><a href="/cloudnativenotes/common-design/modeling/nosql.html" class="sidebar-item" aria-label="NoSQL 建模规范"><!--[--><!--]--> NoSQL 建模规范 <!--[--><!--]--></a><!----></li><!--]--></ul></li><li><p tabindex="0" class="sidebar-item">API 设计 <!----></p><ul style="" class="sidebar-item-children"><!--[--><li><a href="/cloudnativenotes/common-design/api/rest.html" class="sidebar-item" aria-label="WEB API 设计规范"><!--[--><!--]--> WEB API 设计规范 <!--[--><!--]--></a><!----></li><li><a href="/cloudnativenotes/common-design/api/webapi.html" class="sidebar-item" aria-label="Web API 路径设计哪家强"><!--[--><!--]--> Web API 路径设计哪家强 <!--[--><!--]--></a><!----></li><!--]--></ul></li><li><p tabindex="0" class="sidebar-item">认证与授权 <!----></p><ul style="" class="sidebar-item-children"><!--[--><li><a href="/cloudnativenotes/common-design/security/roadmap.html" class="sidebar-item" aria-label="方案概览"><!--[--><!--]--> 方案概览 <!--[--><!--]--></a><!----></li><li><a href="/cloudnativenotes/common-design/security/auth.html" class="sidebar-item" aria-label="身份认证"><!--[--><!--]--> 身份认证 <!--[--><!--]--></a><!----></li><li><a href="/cloudnativenotes/common-design/security/permission.html" class="sidebar-item" aria-label="授权管理"><!--[--><!--]--> 授权管理 <!--[--><!--]--></a><!----></li><!--]--></ul></li><!--]--></ul></li><li><p tabindex="0" class="sidebar-item sidebar-heading">分布式系统-理论篇 <!----></p><ul style="" class="sidebar-item-children"><!--[--><li><a href="/cloudnativenotes/distributed-system-theory/overview.html" class="sidebar-item" aria-label="分布式系统概览"><!--[--><!--]--> 分布式系统概览 <!--[--><!--]--></a><!----></li><li><a href="/cloudnativenotes/distributed-system-theory/sharding-and-replication.html" class="sidebar-item" aria-label="数据分区与复制"><!--[--><!--]--> 数据分区与复制 <!--[--><!--]--></a><!----></li><li><a href="/cloudnativenotes/distributed-system-theory/consistency-and-consensus.html" class="sidebar-item" aria-label="分布式共识"><!--[--><!--]--> 分布式共识 <!--[--><!--]--></a><!----></li><li><a href="/cloudnativenotes/distributed-system-theory/transaction.html" class="sidebar-item" aria-label="分布式事务"><!--[--><!--]--> 分布式事务 <!--[--><!--]--></a><!----></li><li><a href="/cloudnativenotes/distributed-system-theory/clock.html" class="sidebar-item" aria-label="分布式时钟"><!--[--><!--]--> 分布式时钟 <!--[--><!--]--></a><!----></li><!--]--></ul></li><li><p tabindex="0" class="sidebar-item sidebar-heading">分布式系统-工程篇 <!----></p><ul style="" class="sidebar-item-children"><!--[--><li><a href="/cloudnativenotes/distributed-system-engineering/distributed-lock.html" class="sidebar-item" aria-label="分布式锁的设计"><!--[--><!--]--> 分布式锁的设计 <!--[--><!--]--></a><!----></li><li><a href="/cloudnativenotes/distributed-system-engineering/uniqueid.html" class="sidebar-item" aria-label="分布式唯一 ID"><!--[--><!--]--> 分布式唯一 ID <!--[--><!--]--></a><!----></li><li><a href="/cloudnativenotes/distributed-system-engineering/cron.html" class="sidebar-item" aria-label="分布式任务调度"><!--[--><!--]--> 分布式任务调度 <!--[--><!--]--></a><!----></li><li><a href="/cloudnativenotes/distributed-system-engineering/session.html" class="sidebar-item" aria-label="分布式会话"><!--[--><!--]--> 分布式会话 <!--[--><!--]--></a><!----></li><li><a href="/cloudnativenotes/distributed-system-engineering/tracing.html" class="sidebar-item" aria-label="分布式追踪"><!--[--><!--]--> 分布式追踪 <!--[--><!--]--></a><!----></li><!--]--></ul></li><li><a href="/cloudnativenotes/cloudnative/summary.md" class="sidebar-item sidebar-heading active" aria-label="云原生架构"><!--[--><!--]--> 云原生架构 <!--[--><!--]--></a><ul style="" class="sidebar-item-children"><!--[--><li><p tabindex="0" class="sidebar-item">什么是云原生 <!----></p><ul style="" class="sidebar-item-children"><!--[--><li><a href="/cloudnativenotes/cloudnative/architecture/architecture.html" class="sidebar-item" aria-label="分布式系统的演进"><!--[--><!--]--> 分布式系统的演进 <!--[--><!--]--></a><!----></li><li><a href="/cloudnativenotes/cloudnative/architecture/definition.html" class="sidebar-item" aria-label="云原生的定义"><!--[--><!--]--> 云原生的定义 <!--[--><!--]--></a><!----></li><li><a href="/cloudnativenotes/cloudnative/architecture/pass.html" class="sidebar-item" aria-label="云原生平台的构建"><!--[--><!--]--> 云原生平台的构建 <!--[--><!--]--></a><!----></li><!--]--></ul></li><li><p tabindex="0" class="sidebar-item active">不可变基础设施 <!----></p><ul style="" class="sidebar-item-children"><!--[--><li><p tabindex="0" class="sidebar-item">容器 <!----></p><ul style="" class="sidebar-item-children"><!--[--><li><a href="/cloudnativenotes/cloudnative/container/docker-namespace.html" class="sidebar-item" aria-label="容器基础技术：namespace"><!--[--><!--]--> 容器基础技术：namespace <!--[--><!--]--></a><!----></li><li><a href="/cloudnativenotes/cloudnative/container/docker-cgroups.html" class="sidebar-item" aria-label="容器基础技术：cgroups"><!--[--><!--]--> 容器基础技术：cgroups <!--[--><!--]--></a><!----></li><li><a href="/cloudnativenotes/cloudnative/container/docker-filesystem.html" class="sidebar-item" aria-label="容器基础技术：文件系统"><!--[--><!--]--> 容器基础技术：文件系统 <!--[--><!--]--></a><!----></li><li><a href="/cloudnativenotes/cloudnative/container/docker-devicemapper.html" class="sidebar-item" aria-label="容器基础技术：devicemapper"><!--[--><!--]--> 容器基础技术：devicemapper <!--[--><!--]--></a><!----></li><li><a href="/cloudnativenotes/cloudnative/container/docker.html" class="sidebar-item" aria-label="Docker 最佳实践"><!--[--><!--]--> Docker 最佳实践 <!--[--><!--]--></a><!----></li><!--]--></ul></li><li><p tabindex="0" class="sidebar-item">Kubernetes <!----></p><ul style="" class="sidebar-item-children"><!--[--><li><a href="/cloudnativenotes/cloudnative/kubernetes/architecture.html" class="sidebar-item" aria-label="整体架构"><!--[--><!--]--> 整体架构 <!--[--><!--]--></a><!----></li><li><a href="/cloudnativenotes/cloudnative/kubernetes/pod.html" class="sidebar-item" aria-label="Pod 那些事"><!--[--><!--]--> Pod 那些事 <!--[--><!--]--></a><!----></li><li><a href="/cloudnativenotes/cloudnative/kubernetes/controller.html" class="sidebar-item" aria-label="控制器对象"><!--[--><!--]--> 控制器对象 <!--[--><!--]--></a><!----></li><li><a href="/cloudnativenotes/cloudnative/kubernetes/config.html" class="sidebar-item" aria-label="配置管理对象"><!--[--><!--]--> 配置管理对象 <!--[--><!--]--></a><!----></li><li><a href="/cloudnativenotes/cloudnative/kubernetes/network.html" class="sidebar-item" aria-label="网络原理"><!--[--><!--]--> 网络原理 <!--[--><!--]--></a><!----></li><li><a href="/cloudnativenotes/cloudnative/kubernetes/storage.html" class="sidebar-item" aria-label="存储原理"><!--[--><!--]--> 存储原理 <!--[--><!--]--></a><!----></li><li><a href="/cloudnativenotes/cloudnative/kubernetes/scheduler.html" class="sidebar-item" aria-label="调度原理"><!--[--><!--]--> 调度原理 <!--[--><!--]--></a><!----></li><li><a href="/cloudnativenotes/cloudnative/kubernetes/security.html" class="sidebar-item" aria-label="安全机制"><!--[--><!--]--> 安全机制 <!--[--><!--]--></a><!----></li><li><a href="/cloudnativenotes/cloudnative/kubernetes/application.html" class="sidebar-item" aria-label="应用封装与扩展"><!--[--><!--]--> 应用封装与扩展 <!--[--><!--]--></a><!----></li><li><a href="/cloudnativenotes/cloudnative/kubernetes/monitoring.html" class="sidebar-item" aria-label="集群监控与 debug"><!--[--><!--]--> 集群监控与 debug <!--[--><!--]--></a><!----></li><!--]--></ul></li><li><p tabindex="0" class="sidebar-item active">服务网格 <!----></p><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/cloudnativenotes/cloudnative/servicemesh/communication.html" class="router-link-active router-link-exact-active router-link-active sidebar-item active" aria-label="服务通信的演进"><!--[--><!--]--> 服务通信的演进 <!--[--><!--]--></a><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/cloudnativenotes/cloudnative/servicemesh/communication.html#远古时代" class="router-link-active router-link-exact-active sidebar-item" aria-label="远古时代"><!--[--><!--]--> 远古时代 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/cloudnativenotes/cloudnative/servicemesh/communication.html#微服务时代" class="router-link-active router-link-exact-active sidebar-item" aria-label="微服务时代"><!--[--><!--]--> 微服务时代 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/cloudnativenotes/cloudnative/servicemesh/communication.html#服务网格时代" class="router-link-active router-link-exact-active sidebar-item" aria-label="服务网格时代"><!--[--><!--]--> 服务网格时代 <!--[--><!--]--></a><ul style="" class="sidebar-item-children"><!--[--><li><a aria-current="page" href="/cloudnativenotes/cloudnative/servicemesh/communication.html#代理模式" class="router-link-active router-link-exact-active sidebar-item" aria-label="代理模式"><!--[--><!--]--> 代理模式 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/cloudnativenotes/cloudnative/servicemesh/communication.html#第一代服务网格-边车代理" class="router-link-active router-link-exact-active sidebar-item" aria-label="第一代服务网格：边车代理"><!--[--><!--]--> 第一代服务网格：边车代理 <!--[--><!--]--></a><!----></li><li><a aria-current="page" href="/cloudnativenotes/cloudnative/servicemesh/communication.html#第二代服务网格-控制-数据平面" class="router-link-active router-link-exact-active sidebar-item" aria-label="第二代服务网格：控制+数据平面"><!--[--><!--]--> 第二代服务网格：控制+数据平面 <!--[--><!--]--></a><!----></li><!--]--></ul></li><!--]--></ul></li><li><a href="/cloudnativenotes/cloudnative/servicemesh/servicemesh.html" class="sidebar-item" aria-label="服务网格产品与生态"><!--[--><!--]--> 服务网格产品与生态 <!--[--><!--]--></a><!----></li><li><a href="/cloudnativenotes/cloudnative/servicemesh/design.html" class="sidebar-item" aria-label="服务网格的设计"><!--[--><!--]--> 服务网格的设计 <!--[--><!--]--></a><!----></li><!--]--></ul></li><!--]--></ul></li><li><p tabindex="0" class="sidebar-item">服务治理 <!----></p><ul style="" class="sidebar-item-children"><!--[--><li><a href="/cloudnativenotes/cloudnative/service/dependency.html" class="sidebar-item" aria-label="服务依赖管理"><!--[--><!--]--> 服务依赖管理 <!--[--><!--]--></a><!----></li><li><a href="/cloudnativenotes/cloudnative/service/stack.html" class="sidebar-item" aria-label="服务整栈编排"><!--[--><!--]--> 服务整栈编排 <!--[--><!--]--></a><!----></li><li><a href="/cloudnativenotes/cloudnative/service/discovery.html" class="sidebar-item" aria-label="服务注册与发现"><!--[--><!--]--> 服务注册与发现 <!--[--><!--]--></a><!----></li><li><a href="/cloudnativenotes/cloudnative/service/lifecycle.html" class="sidebar-item" aria-label="服务生命周期管理"><!--[--><!--]--> 服务生命周期管理 <!--[--><!--]--></a><!----></li><!--]--></ul></li><li><p tabindex="0" class="sidebar-item">流量治理 <!----></p><ul style="" class="sidebar-item-children"><!--[--><li><a href="/cloudnativenotes/cloudnative/service/traffic/loadbalancing.html" class="sidebar-item" aria-label="负载均衡"><!--[--><!--]--> 负载均衡 <!--[--><!--]--></a><!----></li><li><a href="/cloudnativenotes/cloudnative/service/traffic/routing.html" class="sidebar-item" aria-label="流量路由"><!--[--><!--]--> 流量路由 <!--[--><!--]--></a><!----></li><li><a href="/cloudnativenotes/cloudnative/service/traffic/rate-limiting.html" class="sidebar-item" aria-label="限流设计"><!--[--><!--]--> 限流设计 <!--[--><!--]--></a><!----></li><li><a href="/cloudnativenotes/cloudnative/service/traffic/mirroring.html" class="sidebar-item" aria-label="流量镜像"><!--[--><!--]--> 流量镜像 <!--[--><!--]--></a><!----></li><!--]--></ul></li><li><p tabindex="0" class="sidebar-item">可观测性 <!----></p><ul style="" class="sidebar-item-children"><!--[--><li><a href="/cloudnativenotes/cloudnative/observability/definition.html" class="sidebar-item" aria-label="什么是可观测性"><!--[--><!--]--> 什么是可观测性 <!--[--><!--]--></a><!----></li><li><a href="/cloudnativenotes/cloudnative/observability/metrics.html" class="sidebar-item" aria-label="指标"><!--[--><!--]--> 指标 <!--[--><!--]--></a><!----></li><li><a href="/cloudnativenotes/cloudnative/observability/logging.html" class="sidebar-item" aria-label="日志"><!--[--><!--]--> 日志 <!--[--><!--]--></a><!----></li><li><a href="/cloudnativenotes/cloudnative/observability/trace.html" class="sidebar-item" aria-label="链路追踪"><!--[--><!--]--> 链路追踪 <!--[--><!--]--></a><!----></li><li><a href="/cloudnativenotes/cloudnative/observability/monitoring.html" class="sidebar-item" aria-label="全栈监控系统架构"><!--[--><!--]--> 全栈监控系统架构 <!--[--><!--]--></a><!----></li><!--]--></ul></li><li><p tabindex="0" class="sidebar-item">DevOps <!----></p><ul style="" class="sidebar-item-children"><!--[--><li><a href="/cloudnativenotes/cloudnative/devops/devops.html" class="sidebar-item" aria-label="打造企业 DevOps 文化"><!--[--><!--]--> 打造企业 DevOps 文化 <!--[--><!--]--></a><!----></li><li><a href="/cloudnativenotes/cloudnative/devops/gitflow.html" class="sidebar-item" aria-label="软件开发工作流"><!--[--><!--]--> 软件开发工作流 <!--[--><!--]--></a><!----></li><li><a href="/cloudnativenotes/cloudnative/devops/cicd.html" class="sidebar-item" aria-label="CI/CD 最佳实践"><!--[--><!--]--> CI/CD 最佳实践 <!--[--><!--]--></a><!----></li><!--]--></ul></li><!--]--></ul></li><li><p tabindex="0" class="sidebar-item sidebar-heading">何以为架构师 <!----></p><ul style="" class="sidebar-item-children"><!--[--><li><a href="/cloudnativenotes/end/responsibility.html" class="sidebar-item" aria-label="架构师的职责"><!--[--><!--]--> 架构师的职责 <!--[--><!--]--></a><!----></li><li><a href="/cloudnativenotes/end/perspective.html" class="sidebar-item" aria-label="架构师的视角"><!--[--><!--]--> 架构师的视角 <!--[--><!--]--></a><!----></li><li><a href="/cloudnativenotes/end/learn.html" class="sidebar-item" aria-label="架构师的学习"><!--[--><!--]--> 架构师的学习 <!--[--><!--]--></a><!----></li><!--]--></ul></li><li><a href="/cloudnativenotes/end/dots.md" class="sidebar-item sidebar-heading" aria-label="后记：那些平淡的一天"><!--[--><!--]--> 后记：那些平淡的一天 <!--[--><!--]--></a><!----></li><!--]--></ul><!--[--><!--]--></aside><!--]--><!--[--><main class="page"><!--[--><!--]--><div class="theme-default-content"><!--[--><!--]--><div><h1 id="服务通信的演进" tabindex="-1"><a class="header-anchor" href="#服务通信的演进" aria-hidden="true">#</a> 服务通信的演进</h1><p>ServiceMesh 服务网格的概念最早由 Buoyant 公司的 CEO William Morgan 在其博文《What’s a service mesh? And why do I need one?》中提出：</p><blockquote><p>A service mesh is a dedicated infrastructure layer for handling service-to-service communication. It’s responsible for the reliable delivery of requests through the complex topology of services that comprise a modern, cloud native application. In practice, the service mesh is typically implemented as an array of lightweight network proxies that are deployed alongside application code, without the application needing to be aware.</p><p>服务网格是一种用于管控服务间通信的的基础设施，职责是为现代云原生应用支持网络请求在复杂的拓扑环境中可靠地传递。在实践中，服务网格通常会以轻量化网络代理的形式来体现，这些代理与应用程序代码会部署在一起，对应用程序来说，它完全不会感知到代理的存在。</p></blockquote><p>可以看到其核心思想是作为<strong>网络代理</strong>，透明接管服务间的通信。任何技术都有其发展历程，不是凭空而来的，因此本篇我们先来回顾一下网络通信的发展历史。</p><h2 id="远古时代" tabindex="-1"><a class="header-anchor" href="#远古时代" aria-hidden="true">#</a> 远古时代</h2><p>在远古时代，计算机之间的通信依赖于物理连接，数据通过电缆、光纤等介质进行传输，这里必须要有相应的组件来与底层硬件交互，进行电信号和程序数据的转换，为此工程师们抽象出了一套网络栈来封装相关的细节。</p><p><img src="https://pub-08b57ed9c8ce4fadab4077a9d577e857.r2.dev/network-communction-history-01.png" alt=""></p><p>网络环境是不可靠的，除了基本的正常通信外，我们还会遇到丢包、乱序、拥塞等问题，早期的工程师在编写业务程序时，必须将这些业务无关的控制逻辑耦合到应用程序中，极大的增加了工程师的负担。</p><p>为了解决这些通用的通信控制问题，工程师们开始将这些控制逻辑剥离出来下沉到操作系统层面，最终形成了 TCP/IP 协议栈。</p><p><img src="https://pub-08b57ed9c8ce4fadab4077a9d577e857.r2.dev/network-communction-history-11.png" alt=""></p><h2 id="微服务时代" tabindex="-1"><a class="header-anchor" href="#微服务时代" aria-hidden="true">#</a> 微服务时代</h2><p>随着移动互联网时代的到来和分布式微服务架构的普及，我们的服务系统变得前所未有的复杂，服务之间的通信变得更加频繁和重要。但在分布式系统下，网络存在著名的 <a href="https://en.wikipedia.org/wiki/Fallacies_of_distributed_computing" target="_blank" rel="noopener noreferrer">8 个谬误(The 8 Fallacies of Distributed Computing)<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a> 问题：</p><ul><li><p>网络是可靠的。The network is reliable.</p></li><li><p>延迟为零。Latency is zero.</p></li><li><p>带宽无限。 Bandwidth is infinite.</p></li><li><p>网络是安全的。The network is secure.</p></li><li><p>网络结构不会变化。Topology doesn&#39;t change.</p></li><li><p>有管理员。There is one administrator.</p></li><li><p>传输成本为零。 Transport cost is zero.</p></li><li><p>网络组成是同质的。The network is homogeneous.</p></li></ul><p>上述假设在分布式系统中往往都不成立，同时随着服务架构的复杂，我们的服务间通信面临着更多的挑战。比如服务频繁上下线带来的服务发现问题、流量过大时的限流、熔断等问题，于是历史开启下一个轮回，开发人员们不得不在服务中再次开发相关的控制逻辑。</p><p><img src="https://pub-08b57ed9c8ce4fadab4077a9d577e857.r2.dev/network-communction-history-04.png" alt=""></p><p>上述这种由开发人员实现复杂且业务无关的<strong>控制逻辑</strong>的场景自然催生了对更高层次抽象的需求，于是微服务架构进入第二阶段，工程师们将这些逻辑剥离为公共组件库，Spring Cloud 就是这一需求的产物。</p><p><img src="https://pub-08b57ed9c8ce4fadab4077a9d577e857.r2.dev/network-communction-history-06.png" alt=""></p><p>这也构成了微服务架构的早期形态（应该还是现在的主流形态），以组件库的形式将<strong>控制逻辑</strong>从应用程序中剥离出来。像 Spring Cloud 对包括服务通信在内的几乎所有微服务所需的通用功能都进行了封装和抽象，下面是一部分组件列表。</p><table><thead><tr><th>功能</th><th>组件</th><th>主要用途</th></tr></thead><tbody><tr><td>配置中心</td><td>Spring Cloud Config</td><td>集中管理配置，可动态刷新，支持 Git、Bus 等</td></tr><tr><td>服务发现</td><td>Netflix Eureka</td><td>服务自动注册与动态发现，替代硬编码地址</td></tr><tr><td>服务网关</td><td>Netflix Zuul</td><td>统一入口，路由转发，鉴权，限流，熔断等</td></tr><tr><td>服务治理</td><td>Netflix Hystrix</td><td>降级、熔断、超时控制、重试等，提高系统稳定性</td></tr><tr><td>负载均衡</td><td>Netflix Ribbon</td><td>多实例服务调用时自动选择一个合适实例（如轮询、权重等）</td></tr><tr><td>链路追踪</td><td>Spring Cloud Sleuth</td><td>记录请求的全链路信息，方便定位问题与性能分析</td></tr><tr><td>消息总线</td><td>Spring Cloud Bus</td><td>配合 Config 实现配置自动刷新，也可用于服务间事件广播</td></tr><tr><td>服务通信</td><td>OpenFeign</td><td>使用注解方式声明 REST 接口，封装调用逻辑，内置负载均衡</td></tr><tr><td>服务安全</td><td>Spring Cloud Security / OAuth2</td><td>微服务之间身份校验与权限控制</td></tr></tbody></table><h2 id="服务网格时代" tabindex="-1"><a class="header-anchor" href="#服务网格时代" aria-hidden="true">#</a> 服务网格时代</h2><p>以公共类库封装通用控制逻辑的方式虽然可行，在由专门编写此类组件的工程师实现的类库基础之上，业务开发人员可以构建出稳健的微服务系统。但这种方式也存在两个明显的问题：</p><ul><li><p><strong>语言依赖性</strong>：类库与特定的语言耦合，没办法做到通用。以 Spring Cloud 为例，其只能在 Java/Spring 生态下使用，如果使用 Go、Python 等语言，相同的功能必须用对应的语言再次开发一遍。</p></li><li><p><strong>复杂且不透明</strong>：通过上面的列表不难看出整个微服务架构的框架是多么的复杂，即使不自己开发，业务开发人员也必须熟悉这些组件的使用才能进行高效正确的开发和维护，且这些组件的变动会侵入到业务，用过 Spring Cloud 同学应该都在服务的配置文件中修改过这些组件相关的配置。<strong>业务工程师再次掉进了关心控制逻辑的泥淖。</strong> 于是熟悉的事情再次上演，工程师们再次寻找将这些控制逻辑剥离出来的方法。</p></li></ul><h3 id="代理模式" tabindex="-1"><a class="header-anchor" href="#代理模式" aria-hidden="true">#</a> 代理模式</h3><p>正如计算机科学的著名金句所说的：</p><blockquote><p>All problems in computer science can be solved by another level of indirection. 计算机科学中的所有问题都可以通过增加一个中间层来解决</p></blockquote><p>早期工程师们尝试了 Proxy 代理模式，核心思想是服务之间不在直接通信，而是将流量通过一个中间代理进行转发，在此基础上人们探索出了 Sidecar 模式，通过运行一个进程来接管服务间的网络通信。像早期的 <a href="google.com/search?oq=Netflix+%E4%BA%86Prana&amp;sourceid=chrome&amp;ie=UTF-8&amp;q=Netflix+%E4%BA%86Prana">Netflix Prana</a> 就是此类产品。</p><p><img src="https://pub-08b57ed9c8ce4fadab4077a9d577e857.r2.dev/network-communction-history-12.png" alt=""></p><p>早期的代理模式存在着一定的缺陷，往往需要依赖额外的组件，比如 Prana 必须依赖 Eureka 服务发现组件。但这里将控<strong>制逻辑抽象为语言无关、业务透明的独立组件</strong>的方向是对的，在此基础之上发展出了两种形态：</p><ul><li><strong>网关</strong>：将代理运行的距离服务更远，分开部署，在更前端的地方进行通信相关的处理。</li><li><strong>边车</strong>：将代理运行的距离服务更近，与服务本身打包在一起，作为服务的一部分接管服务的通信。</li></ul><h3 id="第一代服务网格-边车代理" tabindex="-1"><a class="header-anchor" href="#第一代服务网格-边车代理" aria-hidden="true">#</a> 第一代服务网格：边车代理</h3><p>Google 在其 <a href="https://www.usenix.org/system/files/conference/hotcloud16/hotcloud16_burns.pdf" target="_blank" rel="noopener noreferrer">Design patterns for container-based distributed systems<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a> 论文中对基于容器开发的分布式系统进行了总结，提出了边车（Sidecar）模式及其延伸而来的 Ambassador 和 Adapter 模式。 基于容器的边车模式很好的解决了上面提到的代理模式的缺陷，边车容器与服务容器打包在一起，共享网络空间，全面的接管服务的网络通信。这种模式有几个明显的优势：</p><ul><li><strong>语言无关</strong>：边车容器与服务容器解耦，边车容器可以使用任何语言实现，且可以为不同语言的服务提供相同的功能。</li><li><strong>强制接管</strong>：通过相关的控制逻辑，可以控制应用容器只与边车容器通信，由边车容器与外部通信，从而强制接管服务间的网络通信。</li><li><strong>业务透明</strong>：服务不需要感知边车容器的存在，所有的通信都通过边车容器进行转发，服务只需要专注于业务逻辑的实现，也不在需要引入任何控制逻辑的类库。</li></ul><p>在分布式微服务架构下，大量的服务实例和 Sidecar 容器的部署在一起，形成了一个<strong>网格</strong>（Mesh）状的网络拓扑结构，因此这种模式也被称为服务网格（Service Mesh）。</p><p><img src="https://pub-08b57ed9c8ce4fadab4077a9d577e857.r2.dev/network-communction-history-16.png" alt=""></p><p>2016 年William Morgan 和 Oliver Gould 离开 twitter 开始创业，创立了 Buoyant 公司，并在 2017 年开源了首个服务网格产品 <a href="https://linkerd.io/" target="_blank" rel="noopener noreferrer">Linkerd<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a>，Linkerd 也是第一个基于边车代理模式的服务网格产品。Linkerd 使用 Rust 语言编写，体积小、性能高，且易于部署和使用，迅速获得了社区的认可。同时期的还有 Lyft 公司开源的 <a href="https://www.envoyproxy.io/" target="_blank" rel="noopener noreferrer">Envoy<span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span></a> 代理，Envoy 使用 C++ 编写，功能更加强大，性能也更高，成为 CNCF 继 Kubernetes、Prometheus 之后第三个毕业的项目。</p><h3 id="第二代服务网格-控制-数据平面" tabindex="-1"><a class="header-anchor" href="#第二代服务网格-控制-数据平面" aria-hidden="true">#</a> 第二代服务网格：控制+数据平面</h3><p>最初的服务网格有大量与应用容器部署在一起的边车代理组成，随着规模的不断增加，对这些边车代理的管理成为新的难题，为了更好的管理这些边车代理，工程师们引入了<strong>控制平面（Control Plane）</strong> 的概念，将边车代理组成的数据平面（Data Plane）与管理它们的控制平面分离开来，至此服务间通信进化到了其最终阶段：基于<strong>控制平面+数据平面</strong>的第二代服务网格架构。</p><p>第二代服务网格以 Istio 为代表，整体架构分为两部分：</p><ul><li><strong>数据平面</strong>：一系列与服务容器部署在一起的边车代理，负责实现服务间的通信需求，包括服务发现、负载均衡、熔断、限流、鉴权等功能。数据平面通常由轻量级的高性能代理组成，Istio 默认使用 Envoy 作为其边车代理。</li><li><strong>控制平面</strong>：负责管理数据平面的组件，与具体边车代理通信，下发各类路由、熔断、服务发现等策略控制信息。</li></ul><p><img src="https://pub-08b57ed9c8ce4fadab4077a9d577e857.r2.dev/network-communction-history-14.png" alt=""></p><p>只看控制平面和数据平面的架构关系的话，其整体关系如下图所示，控制组件（上面深蓝色）与数据平面（下面浅蓝色）代理组成了一个网格状的网络拓扑结构，这也是服务网格名称的由来。</p><p><img src="https://pub-08b57ed9c8ce4fadab4077a9d577e857.r2.dev/network-communction-history-15.png" alt=""></p><p>至此我们介绍完了服务间通信的发展历程，可以看到服务网格并不是什么新鲜的事物，而是服务间通信演进的必然产物。其数据平面和控制平面也不是什么新鲜的概念，早在 SDN（软件定义网络）中就已经存在，服务网格只是将这些概念应用到了服务间通信中而已。</p></div><!--[--><!--[--><div class="page-info" data-v-efed79f6><div class="star" data-v-efed79f6><span data-v-efed79f6><a data-icon="octicon-star" href="https://github.com/zouyingjie/cloudnative-notes">Star 关注</a></span></div><div class="last-updated" data-v-efed79f6><span class="prefix" data-v-efed79f6>总字数:</span><span class="words" data-v-efed79f6>2876</span><span class="prefix" data-v-efed79f6>字</span></div></div><div id="comment" class="giscus-wrapper input-top layout-comment" style="display:block;" data-v-efed79f6><div class="loading-icon-wrapper" style="display:flex;align-items:center;justify-content:center;height:96px"><svg xmlns="http://www.w3.org/2000/svg" width="48" height="48" preserveAspectRatio="xMidYMid" viewBox="25 25 50 50"><animateTransform attributeName="transform" type="rotate" dur="2s" keyTimes="0;1" repeatCount="indefinite" values="0;360"></animateTransform><circle cx="50" cy="50" r="20" fill="none" stroke="currentColor" stroke-width="4" stroke-linecap="round"><animate attributeName="stroke-dasharray" dur="1.5s" keyTimes="0;0.5;1" repeatCount="indefinite" values="1,200;90,200;1,200"></animate><animate attributeName="stroke-dashoffset" dur="1.5s" keyTimes="0;0.5;1" repeatCount="indefinite" values="0;-35px;-125px"></animate></circle></svg></div></div><!--]--><!--]--></div><footer class="page-meta"><div class="meta-item edit-link"><a class="external-link meta-item-label" href="https://github.com/zouyingjie/cloudnativenotes/edit/main/cloudnative/servicemesh/communication.md" rel="noopener noreferrer" target="_blank" aria-label="在GitHub中编辑"><!--[--><!--]--> 在GitHub中编辑 <span><svg class="external-link-icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg><span class="external-link-icon-sr-only">open in new window</span></span><!--[--><!--]--></a></div><div class="meta-item last-updated"><span class="meta-item-label">Last Updated: </span><!----></div><div class="meta-item contributors"><span class="meta-item-label">Contributors: </span><span class="meta-item-info"><!--[--><!--[--><span class="contributor" title="email: yingjiezou1@gmail.com">zouyingjie</span><!----><!--]--><!--]--></span></div></footer><nav class="page-nav"><p class="inner"><!----><span class="next"><a href="/cloudnativenotes/cloudnative/servicemesh/servicemesh.html" class="" aria-label="服务网格产品与生态"><!--[--><!--]--> 服务网格产品与生态 <!--[--><!--]--></a></span></p></nav><!--[--><!--]--></main><!--]--></div><!----><!--]--></div>
    <script type="module" src="/cloudnativenotes/assets/app-C-eiXR-Q.js" defer></script>
  </body>
</html>
